<!DOCTYPE html>
<html lang="fr" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Vocabulaire Illustré</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            border-radius: 20px 20px 0 0;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 28px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .subtitle {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }

        .topic-btn {
            position: relative;
            width: 120px;
            height: 120px;
            border: 4px solid #ffd700;
            border-radius: 20px; 
            font-size: 14px;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 2px rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            margin: 0 auto;
            overflow: hidden;
        }

        .topic-btn::before {
            content: '';
            position: absolute;
            top: -4px;
            left: -4px;
            right: -4px;
            bottom: -4px;
            background: linear-gradient(45deg, #ffd700, #ffed4e, #ffd700);
            border-radius: 20px;  
            z-index: -1;
            animation: goldShimmer 3s ease-in-out infinite;
        }

        .topic-btn::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            right: 2px;
            bottom: 2px;
            background: linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
            border-radius: 20px;
            z-index: 1;
        }

        @keyframes goldShimmer {
            0%, 100% { transform: rotate(0deg); opacity: 0.7; }
            50% { transform: rotate(180deg); opacity: 1; }
        }

        .topic-btn:hover {
            transform: translateY(-8px) scale(1.08);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.25), 0 0 0 4px rgba(255, 215, 0, 0.6);
            border-color: #ffed4e;
        }

        .topic-btn:hover::before {
            animation-duration: 1s;
        }

        .topic-btn .topic-content {
            position: relative;
            z-index: 2;
        }

        .fruits { background: linear-gradient(135deg, #ff6b6b, #ee5a52); }
        .vegetables { background: linear-gradient(135deg, #4ecdc4, #44a08d); }
        .professions { background: linear-gradient(135deg, #45b7d1, #2196f3); }
        .maison { background: linear-gradient(135deg, #96ceb4, #85c1a6); }
        .animaux { background: linear-gradient(135deg, #feca57, #ff9f43); }
        .couleurs { background: linear-gradient(135deg, #ff7675, #fd79a8); }
        .aliments { background: linear-gradient(135deg, #a29bfe, #6c5ce7); }
        .vetements { background: linear-gradient(135deg, #fd79a8, #fdcb6e); }
        .famille { background: linear-gradient(135deg, #00b894, #00cec9); }
        .ecole { background: linear-gradient(135deg, #e17055, #d63031); }
        .transport { background: linear-gradient(135deg, #0984e3, #74b9ff); }
        .corps { background: linear-gradient(135deg, #00cec9, #55a3ff); }

        .vocabulary-page {
            display: none;
        }

        .vocabulary-page.active {
            display: block;
        }

        .back-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: all 0.3s ease;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-btn:hover {
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .vocabulary-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 18px;
        }

        .vocab-item {
            position: relative;
            background: white;
            border-radius: 18px;
            padding: 18px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .vocab-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .vocab-image {
            width: 140px;
            height: 165px;
            background: #f8f9fa;
            border-radius: 15px;
            margin: 0 auto 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 42px;
            border: 3px solid #e9ecef;
        }

        .vocab-label {
            font-weight: 600;
            color: #333;
            font-size: 14px;
        }

        .page-title {
            text-align: center;
            font-size: 24px;
            color: #333;
            margin-bottom: 25px;
            font-weight: 700;
        }

        .audio-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 20px;
            height: 20px;
            background: #4ecdc4;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            font-size: 16px;
            color: #666;
        }

        .error-message {
            text-align: center;
            color: #e74c3c;
            padding: 20px;
            background: #ffeaea;
            border-radius: 10px;
            margin: 10px 0;
        }

        .progress-bar {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin: 15px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4ecdc4, #45b7d1);
            width: 0%;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 12px;
            color: #666;
        }

        .learned {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
        }

        .quiz-mode, .games-mode {
            background: linear-gradient(135deg, #e17055, #d63031);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin-left: 8px;
            box-shadow: 0 4px 15px rgba(225, 112, 85, 0.3);
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .games-mode {
            background: linear-gradient(135deg, #00b894, #00cec9);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
        }

        .quiz-mode:hover, .games-mode:hover {
            transform: translateY(-2px);
            text-decoration: none;
        }

        .quiz-mode:hover {
            box-shadow: 0 6px 20px rgba(225, 112, 85, 0.4);
        }

        .games-mode:hover {
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- الصفحة الرئيسية -->
        <div id="homepage" class="page active">
            <div class="header">
                <h1>Mon Vocabulaire Illustré</h1>
                <p class="subtitle">Apprendre le français avec des images et des sons</p>
            </div>
            
            <div class="topics-grid">
                <button class="topic-btn fruits" onclick="showVocabulary('fruits')" onmouseenter="speakTopicTitle('Les Fruits')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="fruits-emoji" src="data/emoji/les fruits.png" alt="🍎" style="width: 60px; height: 60px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🍎</div>
                        <div>Les Fruits</div>
                    </div>
                </button>
                <button class="topic-btn vegetables" onclick="showVocabulary('legumes')" onmouseenter="speakTopicTitle('Les Légumes')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="legumes-emoji" src="data/emoji/les legumes.jpg" alt="🥕" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🥕</div>
                        <div>Les Légumes</div>
                    </div>
                </button>
                <button class="topic-btn professions" onclick="showVocabulary('professions')" onmouseenter="speakTopicTitle('Les Professions')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="professions-emoji" src="data/emoji/les professions.jpg" alt="👨‍⚕️" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">👨‍⚕️</div>
                        <div>Les Professions</div>
                    </div>
                </button>
                <button class="topic-btn maison" onclick="showVocabulary('maison')" onmouseenter="speakTopicTitle('La Maison')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="maison-emoji" src="data/emoji/la maison.jpg" alt="🏠" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🏠</div>
                        <div>La Maison</div>
                    </div>
                </button>
                <button class="topic-btn animaux" onclick="showVocabulary('animaux')" onmouseenter="speakTopicTitle('Les Animaux')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="animaux-emoji" src="data/emoji/les animaux.jpg" alt="🐱" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🐱</div>
                        <div>Les Animaux</div>
                    </div>
                </button>
                <button class="topic-btn couleurs" onclick="showVocabulary('couleurs')" onmouseenter="speakTopicTitle('Les Couleurs')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="couleurs-emoji" src="data/emoji/les couleurs.jpg" alt="🎨" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🎨</div>
                        <div>Les Couleurs</div>
                    </div>
                </button>
                <button class="topic-btn aliments" onclick="showVocabulary('aliments')" onmouseenter="speakTopicTitle('Les Aliments')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="aliments-emoji" src="data/emoji/les aliments.jpg" alt="🍞" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🍞</div>
                        <div>Les Aliments</div>
                    </div>
                </button>
                <button class="topic-btn vetements" onclick="showVocabulary('vetements')" onmouseenter="speakTopicTitle('Les Vêtements')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="vetements-emoji" src="data/emoji/les vetements.jpg" alt="👕" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">👕</div>
                        <div>Les Vêtements</div>
                    </div>
                </button>
                <button class="topic-btn famille" onclick="showVocabulary('famille')" onmouseenter="speakTopicTitle('La Famille')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="famille-emoji" src="data/emoji/la famille.jpg" alt="👨‍👩‍👧‍👦" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">👨‍👩‍👧‍👦</div>
                        <div>La Famille</div>
                    </div>
                </button>
                <button class="topic-btn ecole" onclick="showVocabulary('ecole')" onmouseenter="speakTopicTitle('L École')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="ecole-emoji" src="data/emoji/l ecole.jpg" alt="📚" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">📚</div>
                        <div>L'École</div>
                    </div>
                </button>
                <button class="topic-btn transport" onclick="showVocabulary('transport')" onmouseenter="speakTopicTitle('Les Transports')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="transport-emoji" src="data/emoji/les transports.jpg" alt="🚗" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">🚗</div>
                        <div>Les Transports</div>
                    </div>
                </button>
                <button class="topic-btn corps" onclick="showVocabulary('corps')" onmouseenter="speakTopicTitle('Le Corps')" onmouseleave="stopSpeaking()">
                    <div class="topic-content">
                        <img id="corps-emoji" src="data/emoji/le corps.jpg" alt="👤" style="width: 40px; height: 40px; margin-bottom: 5px;" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                        <div style="display: none; font-size: 28px; margin-bottom: 5px;">👤</div>
                        <div>Le Corps</div>
                    </div>
                </button>
            </div>
        </div>

        <!-- صفحة المفردات -->
        <div id="vocabulary-page" class="vocabulary-page">
            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                <button class="back-btn" onclick="showHomepage()" title="الصفحة الرئيسية">🏠</button>
                <a id="quiz-link" href="#" class="quiz-mode" target="_blank">📝 Mode Quiz</a>
                <a id="games-link" href="#" class="games-mode" target="_blank">🎮 Mode Jeux</a>
            </div>
            <h2 id="topic-title" class="page-title"></h2>
            
            <div class="stats">
                <span id="learned-count">Appris: 0/8</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="progress-bar">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
            
            <div id="vocabulary-content" class="vocabulary-grid">
            </div>
        </div>
    </div>

    <script>
        // بيانات المفردات مع الرموز التعبيرية كبديل للصور
        const vocabularyData = {
            fruits: {
                title: "Les Fruits",
                items: [
                    { name: "pomme", emoji: "🍎", label: "Pomme" },
                    { name: "banane", emoji: "🍌", label: "Banane" },
                    { name: "orange", emoji: "🍊", label: "Orange" },
                    { name: "fraise", emoji: "🍓", label: "Fraise" },
                    { name: "raisin", emoji: "🍇", label: "Raisin" },
                    { name: "peche", emoji: "🍑", label: "Pêche" },
                    { name: "ananas", emoji: "🍍", label: "Ananas" },
                    { name: "melon", emoji: "🍍", label: "Melon" },
                    { name: "abricot", emoji: "🍍", label: "Abricot" },
                    { name: "kiwi", emoji: "🍍", label: "kiwi" },
                    { name: "poire", emoji: "🍍", label: "poire" },
                    { name: "avocat", emoji: "🍍", label: "avocat" },
                    { name: "framboise", emoji: "🍍", label: "framboise" },
                    { name: "cerise", emoji: "🍍", label: "cerise" },
                    { name: "pastéque", emoji: "🍉", label: "pastéque" },
                    { name: "kaki", emoji: "🍍", label: "kaki" },
                    { name: "figue", emoji: "🍍", label: "figue" },
                    { name: "citron", emoji: "🍍", label: "citron" },
                    { name: "Clémentine", emoji: "🍍", label: "Clémentine" },
                    { name: "Fruit du dragon", emoji: "🍉", label: "Fruit du dragon" },
                    { name: "mangue", emoji: "🍍", label: "mangue" },
                    { name: "grenade", emoji: "🍉", label: "grenade" },
                    { name: "mûre", emoji: "🍍", label: "mûre" },
                    { name: "pamplemousse", emoji: "🍍", label: "pamplemousse" },
                    { name: "papaye", emoji: "🍉", label: "papaye" },
                    { name: "prune", emoji: "🍍", label: "prune" },
                    { name: "myrtille", emoji: "🍍", label: "myrtille" },
                    { name: "Noix de coco", emoji: "🍉", label: "Noix de coco" }
                ]
            },
            legumes: {
                title: "Les Légumes",
                items: [
                    { name: "carotte", emoji: "🥕", label: "Carotte" },
                    { name: "tomate", emoji: "🍅", label: "Tomate" },
                    { name: "brocoli", emoji: "🥦", label: "Brocoli" },
                    { name: "pomme_de_terre", emoji: "🥔", label: "Pomme de terre" },
                    { name: "oignon", emoji: "🧅", label: "Oignon" },
                    { name: "poivron", emoji: "🫑", label: "Poivron" },
                    { name: "salade", emoji: "🥬", label: "Salade" },
                    { name: "mais", emoji: "🌽", label: "Maïs" }
                ]
            },
            professions: {
                title: "Les Professions",
                items: [
                    { name: "docteur", emoji: "👨‍⚕️", label: "Docteur" },
                    { name: "professeur", emoji: "👨‍🏫", label: "Professeur" },
                    { name: "policier", emoji: "👮‍♂️", label: "Policier" },
                    { name: "pompier", emoji: "👨‍🚒", label: "Pompier" },
                    { name: "cuisinier", emoji: "👨‍🍳", label: "Cuisinier" },
                    { name: "pilote", emoji: "👨‍✈️", label: "Pilote" },
                    { name: "mecanicien", emoji: "👨‍🔧", label: "Mécanicien" },
                    { name: "artiste", emoji: "👨‍🎨", label: "Artiste" }
                ]
            },
            maison: {
                title: "La Maison",
                items: [
                    { name: "lit", emoji: "🛏️", label: "Lit" },
                    { name: "chaise", emoji: "🪑", label: "Chaise" },
                    { name: "table", emoji: "🪟", label: "Table" },
                    { name: "fenetre", emoji: "🪟", label: "Fenêtre" },
                    { name: "porte", emoji: "🚪", label: "Porte" },
                    { name: "televiseur", emoji: "📺", label: "Téléviseur" },
                    { name: "refrigerateur", emoji: "🧊", label: "Réfrigérateur" },
                    { name: "lampe", emoji: "💡", label: "Lampe" }
                ]
            },
            animaux: {
                title: "Les Animaux",
                items: [
                    { name: "chat", emoji: "🐱", label: "Chat" },
                    { name: "chien", emoji: "🐶", label: "Chien" },
                    { name: "oiseau", emoji: "🐦", label: "Oiseau" },
                    { name: "poisson", emoji: "🐟", label: "Poisson" },
                    { name: "elephant", emoji: "🐘", label: "Éléphant" },
                    { name: "lion", emoji: "🦁", label: "Lion" },
                    { name: "lapin", emoji: "🐰", label: "Lapin" },
                    { name: "vache", emoji: "🐄", label: "Vache" }
                ]
            },
            couleurs: {
                title: "Les Couleurs",
                items: [
                    { name: "rouge", emoji: "🔴", label: "Rouge" },
                    { name: "bleu", emoji: "🔵", label: "Bleu" },
                    { name: "jaune", emoji: "🟡", label: "Jaune" },
                    { name: "vert", emoji: "🟢", label: "Vert" },
                    { name: "orange", emoji: "🟠", label: "Orange" },
                    { name: "violet", emoji: "🟣", label: "Violet" },
                    { name: "noir", emoji: "⚫", label: "Noir" },
                    { name: "blanc", emoji: "⚪", label: "Blanc" }
                ]
            },
            aliments: {
                title: "Les Aliments",
                items: [
                    { name: "pain", emoji: "🍞", label: "Pain" },
                    { name: "fromage", emoji: "🧀", label: "Fromage" },
                    { name: "lait", emoji: "🥛", label: "Lait" },
                    { name: "oeuf", emoji: "🥚", label: "Œuf" },
                    { name: "viande", emoji: "🥩", label: "Viande" },
                    { name: "poisson", emoji: "🐟", label: "Poisson" },
                    { name: "riz", emoji: "🍚", label: "Riz" },
                    { name: "pates", emoji: "🍝", label: "Pâtes" }
                ]
            },
            vetements: {
                title: "Les Vêtements",
                items: [
                    { name: "chemise", emoji: "👕", label: "Chemise" },
                    { name: "pantalon", emoji: "👖", label: "Pantalon" },
                    { name: "robe", emoji: "👗", label: "Robe" },
                    { name: "chaussures", emoji: "👞", label: "Chaussures" },
                    { name: "chapeau", emoji: "🎩", label: "Chapeau" },
                    { name: "manteau", emoji: "🧥", label: "Manteau" },
                    { name: "chaussettes", emoji: "🧦", label: "Chaussettes" },
                    { name: "lunettes", emoji: "👓", label: "Lunettes" }
                ]
            },
            famille: {
                title: "La Famille",
                items: [
                    { name: "pere", emoji: "👨", label: "Père" },
                    { name: "mere", emoji: "👩", label: "Mère" },
                    { name: "fils", emoji: "👦", label: "Fils" },
                    { name: "fille", emoji: "👧", label: "Fille" },
                    { name: "grand_pere", emoji: "👴", label: "Grand-père" },
                    { name: "grand_mere", emoji: "👵", label: "Grand-mère" },
                    { name: "frere", emoji: "👨‍👦", label: "Frère" },
                    { name: "soeur", emoji: "👩‍👧", label: "Sœur" }
                ]
            },
            ecole: {
                title: "L'École",
                items: [
                    { name: "livre", emoji: "📖", label: "Livre" },
                    { name: "crayon", emoji: "✏️", label: "Crayon" },
                    { name: "stylo", emoji: "🖊️", label: "Stylo" },
                    { name: "cahier", emoji: "📓", label: "Cahier" },
                    { name: "tableau", emoji: "🖼️", label: "Tableau" },
                    { name: "sac", emoji: "🎒", label: "Sac" },
                    { name: "regle", emoji: "📏", label: "Règle" },
                    { name: "gomme", emoji: "🗂️", label: "Gomme" }
                ]
            },
            transport: {
                title: "Les Transports",
                items: [
                    { name: "voiture", emoji: "🚗", label: "Voiture" },
                    { name: "bus", emoji: "🚌", label: "Bus" },
                    { name: "train", emoji: "🚂", label: "Train" },
                    { name: "avion", emoji: "✈️", label: "Avion" },
                    { name: "bateau", emoji: "🚢", label: "Bateau" },
                    { name: "velo", emoji: "🚲", label: "Vélo" },
                    { name: "moto", emoji: "🏍️", label: "Moto" },
                    { name: "metro", emoji: "🚇", label: "Métro" }
                ]
            },
            corps: {
                title: "Le Corps",
                items: [
                    { name: "tete", emoji: "👤", label: "Tête" },
                    { name: "yeux", emoji: "👀", label: "Yeux" },
                    { name: "nez", emoji: "👃", label: "Nez" },
                    { name: "bouche", emoji: "👄", label: "Bouche" },
                    { name: "main", emoji: "✋", label: "Main" },
                    { name: "pied", emoji: "🦶", label: "Pied" },
                    { name: "oreille", emoji: "👂", label: "Oreille" },
                    { name: "bras", emoji: "💪", label: "Bras" }
                ]
            }
        };

        // متغير لتخزين الصوت الحالي
        let currentAudio = null;
        let currentTopic = null;
        let learnedWords = new Set();
        let favorites = new Set();
        let topicSpeech = null;

        // تشغيل صوت عناوين المواضيع
        function speakTopicTitle(title) {
            stopSpeaking(); // إيقاف أي صوت سابق
            if ('speechSynthesis' in window) {
                topicSpeech = new SpeechSynthesisUtterance(title);
                topicSpeech.lang = 'fr-FR';
                topicSpeech.rate = 0.8;
                topicSpeech.pitch = 1;
                speechSynthesis.speak(topicSpeech);
            }
        }

        // إيقاف تشغيل صوت العناوين
        function stopSpeaking() {
            if (topicSpeech && 'speechSynthesis' in window) {
                speechSynthesis.cancel();
                topicSpeech = null;
            }
        }

        // تحديث إحصائيات التعلم
        function updateStats() {
            if (!currentTopic) return;
            
            const totalWords = vocabularyData[currentTopic].items.length;
            const learnedCount = learnedWords.size;
            const percentage = Math.round((learnedCount / totalWords) * 100);
            
            document.getElementById('learned-count').textContent = `Appris: ${learnedCount}/${totalWords}`;
            document.getElementById('progress-percent').textContent = `${percentage}%`;
            document.getElementById('progress-fill').style.width = `${percentage}%`;
        }

        // تحديث روابط الكويز والألعاب حسب الموضوع المحدد
        function updateQuizAndGamesLinks(topic) {
            const quizLink = document.getElementById('quiz-link');
            const gamesLink = document.getElementById('games-link');
            
            // تحديث مسار الكويز ليكون في مجلد الموضوع
            quizLink.href = `data/${topic}/quiz.html`;
            
            // تحديث مسار الألعاب ليكون في مجلد الموضوع
            gamesLink.href = `data/${topic}/jeux.html`;
        }

        function showVocabulary(topic) {
            const data = vocabularyData[topic];
            if (!data) return;

            currentTopic = topic;
            learnedWords.clear(); // إعادة تعيين للموضوع الجديد

            // تحديث روابط الكويز والألعاب
            updateQuizAndGamesLinks(topic);

            document.getElementById('homepage').style.display = 'none';
            document.getElementById('vocabulary-page').style.display = 'block';
            document.getElementById('topic-title').textContent = data.title;

            const content = document.getElementById('vocabulary-content');
            content.innerHTML = '';

            data.items.forEach((item, index) => {
                const vocabItem = document.createElement('div');
                vocabItem.className = 'vocab-item';
                
                // محاولة تحميل الصورة الحقيقية أولاً، ثم الرجوع للرمز التعبيري
                const imagePath = `data/${topic}/${item.name}.jpg`;
                const img = new Image();
                img.onload = function() {
                    vocabItem.innerHTML = `
                        <button class="favorite-btn" onclick="toggleFavorite('${topic}', '${item.name}', this)" title="Ajouter aux favoris">♡</button>
                        <div class="audio-indicator">🔊</div>
                        <div class="vocab-image">
                            <img src="${imagePath}" alt="${item.label}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;">
                        </div>
                        <div class="vocab-label">${item.label}</div>
                    `;
                    addEventListeners();
                };
                img.onerror = function() {
                    // في حالة عدم وجود الصورة، استخدم الرمز التعبيري
                    vocabItem.innerHTML = `
                        <button class="favorite-btn" onclick="toggleFavorite('${topic}', '${item.name}', this)" title="Ajouter aux favoris">♡</button>
                        <div class="audio-indicator">🔊</div>
                        <div class="vocab-image">${item.emoji}</div>
                        <div class="vocab-label">${item.label}</div>
                    `;
                    addEventListeners();
                };
                img.src = imagePath;

                function addEventListeners() {
                    // إضافة وظيفة تشغيل الصوت عند النقر فقط
                    vocabItem.addEventListener('click', () => {
                        playAudio(topic, item.name, vocabItem);
                        markAsLearned(item.name, vocabItem);
                    });
                }
                
                content.appendChild(vocabItem);
            });

            updateStats();
        }

        function showHomepage() {
            document.getElementById('vocabulary-page').style.display = 'none';
            document.getElementById('homepage').style.display = 'block';
            
            // إيقاف أي صوت قيد التشغيل
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            
            stopSpeaking(); // إيقاف صوت العناوين
            currentTopic = null;
        }

        // وضع علامة على الكلمة كمتعلمة
        function markAsLearned(wordName, element) {
            learnedWords.add(wordName);
            element.classList.add('learned');
            updateStats();
        }

        // تبديل حالة المفضلة
        function toggleFavorite(topic, wordName, button) {
            const key = `${topic}-${wordName}`;
            if (favorites.has(key)) {
                favorites.delete(key);
                button.textContent = '♡';
                button.classList.remove('active');
            } else {
                favorites.add(key);
                button.textContent = '♥';
                button.classList.add('active');
            }
        }

        function playAudio(topic, itemName, element) {
            // إيقاف الصوت السابق إذا كان قيد التشغيل
            if (currentAudio) {
                currentAudio.pause();
            }

            // إنشاء مسار الملف الصوتي
            const audioPath = `data/${topic}/${itemName}.mp3`;
            
            try {
                currentAudio = new Audio(audioPath);
                
                // إضافة تأثير بصري عند تشغيل الصوت
                element.classList.add('playing');
                
                currentAudio.onended = () => {
                    element.classList.remove('playing');
                    currentAudio = null;
                };
                
                currentAudio.onerror = () => {
                    console.log(`لا يمكن تحميل الملف الصوتي: ${audioPath}`);
                    element.classList.remove('playing');
                    currentAudio = null;
                    
                    // يمكن إضافة تنبيه للمستخدم هنا إذا لزم الأمر
                    // أو استخدام تقنية Text-to-Speech كبديل
                    speakText(element.querySelector('.vocab-label').textContent);
                };
                
                currentAudio.play();
                
            } catch (error) {
                console.log('خطأ في تشغيل الصوت:', error);
                element.classList.remove('playing');
                
                // استخدام Text-to-Speech كبديل
                speakText(element.querySelector('.vocab-label').textContent);
            }
        }

        // وظيفة بديلة لتحويل النص إلى صوت
        function speakText(text) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'fr-FR'; // اللغة الفرنسية
                utterance.rate = 0.8; // سرعة متوسطة
                utterance.pitch = 1; // نبرة طبيعية
                speechSynthesis.speak(utterance);
            }
        }

        // تحسين الاستجابة للمس على الأجهزة المحمولة
        document.addEventListener('DOMContentLoaded', function() {
            // إضافة دعم اللمس
            document.addEventListener('touchstart', function() {}, {passive: true});
            
            // تحسين الأوديو للأجهزة المحمولة
            document.addEventListener('touchend', function() {
                // تفعيل السياق الصوتي على الأجهزة المحمولة
                if (window.AudioContext || window.webkitAudioContext) {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    if (audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                }
            }, {once: true});
        });
    </script>
</body>
</html>
